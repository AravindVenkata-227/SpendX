
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Transactions:
    // - Users can only read their own transactions.
    // - Users can only create transactions for themselves.
    // - (Update/Delete can be added similarly if needed)
    match /transactions/{transactionId} {
      allow read: if request.auth != null && resource.data.userId == request.auth.uid;
      allow create: if request.auth != null && request.resource.data.userId == request.auth.uid;
      // To allow updates only by the owner:
      // allow update: if request.auth != null && resource.data.userId == request.auth.uid;
      // To allow deletes only by the owner:
      // allow delete: if request.auth != null && resource.data.userId == request.auth.uid;
    }

    // It's good practice to explicitly deny access to other collections by default
    // or define specific rules for them if they exist.
    // Example: Deny all access to any other path by default
    // match /{document=**} {
    //   allow read, write: if false;
    // }
  }
}
